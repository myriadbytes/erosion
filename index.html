<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>WebGPU Erosion</title>
      <script type="module" crossorigin src="/erosion/assets/index-Bh0TBeh3.js"></script>
      <link rel="stylesheet" crossorigin href="/erosion/assets/index-BJpWf55p.css">
    </head>
    <body>
        <main id="viewport">
            <canvas id="viewport-canvas" width="800" height="600"></canvas>
        </main>
        <aside id="control-panel">
            <header>
                <h1>WebGPU Hydraulic Erosion</h1>
                <p>
                    Based on a
                    <a href="https://inria.hal.science/inria-00402079/document"
                        >paper by by Xing Mei, Philippe Decaudin and Bao-Gang
                        Hu</a
                    >.
                </p>
            </header>
            <fieldset>
                <legend>visualization :</legend>
                <div>
                    <input
                        type="radio"
                        name="visualization"
                        value="terrain"
                        id="terrain"
                        checked
                    />
                    <label for="terrain">terrain</label>
                </div>
                <div hidden>
                    <input
                        type="radio"
                        name="visualization"
                        value="flow-x"
                        id="flow-x"
                    />
                    <label for="flow-x">flow x</label>
                </div>
                <div hidden>
                    <input
                        type="radio"
                        name="visualization"
                        value="flow-y"
                        id="flow-y"
                    />
                    <label for="flow-y">flow y</label>
                </div>
                <div hidden>
                    <input
                        type="radio"
                        name="visualization"
                        value="velocity-x"
                        id="velocity-x"
                    />
                    <label for="velocity-x">velocity x</label>
                </div>
                <div hidden>
                    <input
                        type="radio"
                        name="visualization"
                        value="velocity-y"
                        id="velocity-y"
                    />
                    <label for="velocity-y">velocity y</label>
                </div>
                <div>
                    <input
                        type="radio"
                        name="visualization"
                        value="sediment"
                        id="sediment"
                    />
                    <label for="sediment">sediment</label>
                </div>
            </fieldset>
            <fieldset>
                <legend>controls :</legend>
                <button id="start-stop-button">stop/resume</button>
                <button id="reset-button">reset</button>
            </fieldset>
            <fieldset>
                <legend>parameters :</legend>
                <label hidden for="timestep-input">timestep</label>
                <input
                    hidden
                    type="number"
                    id="timestep-input"
                    value="1"
                    step="0.1"
                />

                <label for="rainfall-input">rainfall</label>
                <input
                    type="number"
                    id="rainfall-input"
                    value="0.1"
                    step="0.01"
                />

                <label hidden for="g-input">gravity</label>
                <input
                    hidden
                    type="number"
                    id="g-input"
                    value="1.0"
                    step="0.1"
                />

                <label for="kc-input">sediment capacity</label>
                <input type="number" id="kc-input" value="0.8" step="0.1" />

                <label for="ks-input">sediment dissolving</label>
                <input type="number" id="ks-input" value="0.1" step="0.01" />

                <label for="kd-input">sediment deposition</label>
                <input type="number" id="kd-input" value="0.1" step="0.01" />

                <label for="evaporation-input">evaporation</label>
                <input
                    type="number"
                    id="evaporation-input"
                    value="0.05"
                    step="0.01"
                />
            </fieldset>

            <fieldset hidden>
                <legend>individual steps</legend>
                <button id="water-increment-button">water increment</button>
                <button id="outflow-flux-button">outflow flux</button>
                <button id="water-velocity-button">water / velocity</button>
                <button id="erosion-deposition-button">
                    erosion / deposition
                </button>
                <button id="transportation-button">transportation</button>
                <button id="evaporation-button">evaporation</button>
                <button id="full-step-button">full step</button>
            </fieldset>

            <fieldset id="scale-fieldset">
                <legend>scale</legend>
                <p>note : settings in this category require a reset</p>

                <div>
                    <label for="height-scale-input"
                        >virtual terrain height</label
                    >
                    <input
                        type="number"
                        id="height-scale-input"
                        value="200"
                        step="10"
                    />
                    <p>unit is m</p>
                </div>

                <div>
                    <label for="resolution-select"
                        >virtual terrain resolution</label
                    >
                    <select name="resolution" id="resolution-select">
                        <option value="256">256</option>
                        <option value="512">512</option>
                        <option value="1024" selected>1024</option>
                        <option value="1024">2048</option>
                    </select>
                    <p>1 pixel = 1mÂ²</p>
                </div>
            </fieldset>
        </aside>
    </body>
</html>
